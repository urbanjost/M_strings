#@(#) Makefile started by makeout(1) 2019-12-16 08:27:04
# generated by:   ...

NULL=
PROGFILES = \
 ../test/demos/adjustc/adjustc.f90  \
 ../test/demos/base/base.f90  \
 ../test/demos/change/change.f90  \
 ../test/demos/chomp/chomp.f90  \
 ../test/demos/codebase/codebase.f90  \
 ../test/demos/compact/compact.f90  \
 ../test/demos/crop/crop.f90  \
 ../test/demos/decodebase/decodebase.f90  \
 ../test/demos/delim/delim.f90  \
 ../test/demos/describe/describe.f90  \
 ../test/demos/expand/expand.f90  \
 ../test/demos/fmt/fmt.f90  \
 ../test/demos/getvals/getvals.f90  \
 ../test/demos/indent/indent.f90  \
 ../test/demos/isalnum/isalnum.f90  \
 ../test/demos/isalpha/isalpha.f90  \
 ../test/demos/isascii/isascii.f90  \
 ../test/demos/isblank/isblank.f90  \
 ../test/demos/iscntrl/iscntrl.f90  \
 ../test/demos/isdigit/isdigit.f90  \
 ../test/demos/isgraph/isgraph.f90  \
 ../test/demos/islower/islower.f90  \
 ../test/demos/isnumber/isnumber.f90  \
 ../test/demos/isprint/isprint.f90  \
 ../test/demos/ispunct/ispunct.f90  \
 ../test/demos/isspace/isspace.f90  \
 ../test/demos/isupper/isupper.f90  \
 ../test/demos/isxdigit/isxdigit.f90  \
 ../test/demos/join/join.f90  \
 ../test/demos/len_white/len_white.f90  \
 ../test/demos/lenset/lenset.f90  \
 ../test/demos/listout/listout.f90  \
 ../test/demos/lower/lower.f90  \
 ../test/demos/matchw/matchw.f90  \
 ../test/demos/merge_str/merge_str.f90  \
 ../test/demos/modif/modif.f90  \
 ../test/demos/msg/msg.f90  \
 ../test/demos/noesc/noesc.f90  \
 ../test/demos/nospace/nospace.f90  \
 ../test/demos/notabs/notabs.f90  \
 ../test/demos/quote/quote.f90  \
 ../test/demos/replace/replace.f90  \
 ../test/demos/reverse/reverse.f90  \
 ../test/demos/rotate13/rotate13.f90  \
 ../test/demos/s2c/s2c.f90  \
 ../test/demos/s2v/s2v.f90  \
 ../test/demos/s2vs/s2vs.f90  \
 ../test/demos/split/split.f90  \
 ../test/demos/stretch/stretch.f90  \
 ../test/demos/string_to_value/string_to_value.f90  \
 ../test/demos/string_to_values/string_to_values.f90  \
 ../test/demos/strtok/strtok.f90  \
 ../test/demos/substitute/substitute.f90  \
 ../test/demos/switch/switch.f90  \
 ../test/demos/transliterate/transliterate.f90  \
 ../test/demos/unquote/unquote.f90  \
 ../test/demos/upper/upper.f90  \
 ../test/demos/upper_quoted/upper_quoted.f90  \
 ../test/demos/v2s/v2s.f90  \
 ../test/demos/value_to_string/value_to_string.f90  \
 ../test/demos/visible/visible.f90  \
 ../test/demos/M_strings/M_strings.f90  \
$(NULL)
# ../test/demos/M_strings_oops/M_strings_oops.f90  \

TESTFILES = ../test/test_suite/test_suite_M_strings.f90
TEST = ${TESTFILES:.f90=}

CPROGFILES = 

PROG = ${PROGFILES:.f90=}

CPROG = ${CPROGFILES:.c=}

SRCS =  M_journal.f90 M_strings.f90 M_strings_oop.f90 

OBJS =  M_journal.o M_strings.o M_strings_oop.o 
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
# platform-specific values you will probably change
# 
LIBS := 
CC := cc
CFLAGS := -O
FC := gfortran
FFLAGS := -O
F90 := gfortran
F90FLAGS := -O
LDFLAGS := 
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
all: $(PROG) $(CPROG)
	@echo "That's all folks!"
$(PROG): $(OBJS)

	-$(F90) $(LDFLAGS) $@.f90 -o $@ $(OBJS) $(LIBS) # && ./$@ </dev/null

.PHONY: clean
clean:
	rm -f $(PROG) $(CPROG) $(OBJS) *.mod $(TEST)

.PHONY: help

help:
	: make    '-- build M_strings M_strings_oop module'
	: run     '-- run manpage demo programs and test program'
	: test    '-- run test program'
	: man     '-- show all manpages as text'
	: ship    '-- rebuild archive files of manpages'
	: clean   '-- clean directory of object files and executables'
	: doxygen '-- run doxygen(1) if you have it'
	: help    '-- display this text'

.PHONY: ship
ship:
	: make easily distributed archive files of manpages
	mkdir -p ../docs
	cd ../man/man3;\
	   gzip *.3m_strings;\
	   zip -r ../../docs/manpages.zip *gz;\
	   tar cvfz ../../docs/manpages.tgz *gz;\
	   gunzip *.3m_strings.gz

.PHONY: run
run: $(PROG)
	# run everything
	echo $? | xargs -n 1  
	echo $? | xargs -n 1  |xargs -iXX /bin/time XX  \</dev/null

.PHONY: test
test: $(OBJS)
	# compile and load
	$(F90) $(LDFLAGS) $(TESTFILES) -o ${TESTFILES:.f90=} $(OBJS) $(LIBS)
	# run 
	${TESTFILES:.f90=}

.PHONY: doxygen
doxygen: 
	doxygen dox.in

.PHONY: man
man:
	@mandb ../man 1>&2
	@env MANPATH=../man MANWIDTH=256 man -k .|col -b
	@env MANPATH=../man MANWIDTH=80  man --regex '.*'|col -b

.SUFFIXES: $(SUFFIXES) .f90 .F90

.f90.o:
	$(F90) $(F90FLAGS) -c $<

.F90.o:
	$(F90) $(F90FLAGS) -c $<

M_strings.o: M_journal.o
M_strings_oop.o: M_strings.o
